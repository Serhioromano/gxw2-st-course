# Обзор ПЛК FX

В данном курсе, мы будем работать только с ПЛК серии FX3G и FX3U. Но серия ПЛК FX гораздо шире. Это FX1N, FX2N, FX2U и еще какие-то даже не помню. В добавок ПЛК серии FX3 уже достаточно устарелые и им на смену пришли более новые FX5, почему же мы все равно останавливаемся на этих моделях?

Все из-за совместимых ПЛК. На сколько я понимаю в какой-то момент прошивка ПЛК этих серий "утекла" и на рынке появилось огромное количество не дорогих ПЛК совместимых с FX китайских производителей. Данные ПЛК достаточно бюджетные при этом не плохого качества и прекрасно справляются со своими задачами, точно так же, как справляются и оригинальные ПЛК Mitsubishi. Совместимых ПЛК на серию FX5 нет, если бы мы изучали эту серию, то мы были бы ограничены только оригинальными ПЛК, что снизило бы возможности выбора как наши так и наших клиентов.

А из всех совместимых ПЛК - FX3G и FX3U самые продвинутые, которые поддерживают больше всего инструкций.

В данном курсе мы остановимся и будем работать с ПЛК серии L02 от Китайского производителя Coolmay хотя естественно большинство из этого курса будет работать с оригинальными ПЛК от Mitsubishi.

Почему именно L02?

1. 100% проверено, все работает, поддержка ST полноценна. Известно много случаев, когда покупались недорогие совместимые ПЛК, а на поверку оказывалось что даже самые простые конструкции ST в них не работали.

    !!! note

        Для самых продвинутых кто тут подумал, при чем тут ПЛК и ST, и что ST это просто возможность IDE в нашем случае GXW, а любая программа все равно компилируется в список инструкций. Да я с вам соглашусь. Но факт остается фактом, что у некоторых ПЛК безымянных производителей, та-же логика на LD работает, а на ST нет. Я подозреваю что это из за конструкции `IF` которая генерирует при компиляции точки `P` поддержка которых в некоторых ПЛК может быть очень ограничена а при использовании инструкции при компиляции точек `P` не возникает. Побольше поговорим об этом когда будет обсуждать компиляцию.

    Если использовать ПЛК L02 Coolmay то можно быть точно уверенным что все инструкции будут работать.

2. Я работаю с этими ПЛК уже больше 3х лет, и они зарекомендовали себя как очень надежные устройства. Сегодня я их и ставлю и рекомендую, совершенно не стесняясь, так как уверен в их надежности и стабильности.

3. Стоимость этого ПЛК пройдет любой даже самый сжатый бюджет. Не на много дороже более дешевых производителей без имени.

4. Уже небольшое сообщество собралось людей программирующих этот ПЛК, и в принципе найти помощь в решении проблемы не так сложно. Есть телеграм группы, где в течении дня можно решить практически любой вопрос.

5. Форм фактор хорошо продуман, с загрузкой проводов спереди, как на всех самых современных ПЛК WAGO, Beckhoff, CREVIS, ... Это помогает делать шкафы достаточно компактными. Съемные клеммы позволяют легко и быстро за минуты производить замену модуля или головного ПЛК.

6. Емкий набор интерфейсов.

    - 1хRS232 - протокол Mitsubishi слейв
    - 2хRS485 - протокол Mitsubishi слейв, Modbus RTU Slave\Master, Свободный протокол
    - 1xEthernet - протокол Modbus TCP, EthernetIP
    - 1хCan - знаю что есть но ни когда не пользовался ни знаю какие там протоколы.

    Такого набора как правило хватает даже для систем с повышенными требованиями к построению пром. сети.

7. Головной ПЛК может содержать 4 аналоговых входа на борту и 4 аналоговых выхода, по два 0-10В и по два 4-20мА. Этого часто хватает на системы малой автоматизации, какие-то станки, небольшие установки, ...

8. Эта линейка модульная, и лего расширяется. Обычно плк серии ФХ3 продаются с набором входов и выходов, например FX3G-24MR, FX3G-60MT, ... Первое это ПЛК с 24 входа и выхода, а второй с 60 входов и выходов. Обычно пополам делиться. Для 24го например 12 входов, 12 выходов. Буквы Т и R как правило ссылаются на вид выхода, релейный (R) или транзисторный (T). Таким образов вы подбираете ПЛК с нужным количеством IO под проект. Для L02 все обстоит по другому. Есть всего 2 базовые модели, L02M24T и L02M32T
и можно устанавливать модули, расширяя IO до 500. Причем выбор модулей очень широк, есть даже тензометрический модуль. А еще е базовому ПЛК можно подключить 4 каплера по EIP и к этим каплером еще до 200 IO на каждый каплер.

Мне кажется что Coolmay здесь превзошла Mitsubishi и сделала продукт который на много превосходит любое оригинальное решение серии FX3G(U). Данный ПЛК способен обеспечить работу небольшого цементного завода. Я бы смело использовал его не только в системах малой но и средней автоматизации с количеством IO и более 1500.

Кончено у этого ПЛК есть и ограничения.

1. Размер программы не может быть больше 32000 шагов. Этого обычно хватает, я пока не выходил за этот предел, но при этом мне часто приходилось оптимизировать код, чтобы сократить размер программы. Если бы я был небрежен в этом отношении были проекты, где я бы не прошел на 32000 шагов. С другой стороны данное ограничение заставило меня глубоко изучить процесс компиляции и оптимизацию, что позволяет мне сегодня писать очень компактные на выходе программы, при этом напичканные фишками.

2. Если сравнивать L02 например с ПЛК на базе CoDeSys, то редактор ST тут не очень. Работает медленно. Инструментов нет ни каких. Да и сама имплементация ST в сравнении содержит меньше фич и больше ограничений. Например нельзя сделать массив из FB. Нельзя использовать глобальные даже константы в FUN.

## Разница между моделями

FX3U и FX3G это просто режимы, одного и того же ПЛК. То-есть аппаратно это одно и тоже устройство например L02M24T, просто его можно перевести в режим FX3G или FX3U.

Если мы будем ссылаться на документацию Mitsubishi то на каждой инструкции у нас будет таблица, в каких ПЛК эта инструкция поддерживается.

![Таблица поддержки инструкций для раных моделей ПЛК серии FX](../img/introdiff.png)

На примере вы видите что инструкция `TIMER_COUNT_FB_M` не поддерживается в ПЛК FX1S, FX0N и FX0S.

FX3U поддерживает чуть больше инструкций чем FX3G. В большинстве эти инструкции касаются Контроля позиции. Но даже тех инструкций что поддерживаются FX3G, мне как правило хватало.

Так же в режиме FX3U работает Ethernet порт на загрузку программ в ПЛК. Но у меня это ни когда не работало стабильно.

У FX3U есть и ограничение, в этом режиме порт USB Type C не работает, и заливать программы можно только через COM порт. Для этого нужен специальный шнур, и RS232 на ПК. Шнур к стати стандартный FX для ПЛК  Mitsubishi не подходит, ни знаю почему но разработчики L02 сделали его под шнур DVP для контроллеров дельта. Это нужно знать прежде чем переключать ПЛК в режим FX3U. К счастью компанию Coolmay
