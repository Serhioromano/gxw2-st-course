
<!doctype html>
<html lang="ru" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Подготовка материалов для курса по программированию ПЛК Mitsubishi серии FX.">
      
      
        <meta name="author" content="Сергей Романов">
      
      
        <link rel="canonical" href="https://serhioromano.github.io/gxw2-st-course/2-basic/timer/">
      
      
        <link rel="prev" href="../compile/">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Таймеры - Курс по GX Works 2 для (FX3G, FX3U)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/code.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Перейти к содержанию
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Верхний колонтитул">
    <a href="../.." title="Курс по GX Works 2 для (FX3G, FX3U)" class="md-header__button md-logo" aria-label="Курс по GX Works 2 для (FX3G, FX3U)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Курс по GX Works 2 для (FX3G, FX3U)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Таймеры
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Темный режим"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Темный режим" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Светлый режим"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Светлый режим" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Поиск" placeholder="Поиск" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Поиск">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Поделиться" aria-label="Поделиться" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Очистить" aria-label="Очистить" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Инициализация поиска
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/serhioromano/gxw2-st-course" title="Перейти к репозиторию" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    serhioromano/gxw2-st-course
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Вкладки" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
    
  
  Главная

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../1-intro/fx-overview/" class="md-tabs__link">
          
  
  
    
  
  1. Введение

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../variables/" class="md-tabs__link">
          
  
  
    
  
  1. База

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Навигация" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Курс по GX Works 2 для (FX3G, FX3U)" class="md-nav__button md-logo" aria-label="Курс по GX Works 2 для (FX3G, FX3U)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Курс по GX Works 2 для (FX3G, FX3U)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/serhioromano/gxw2-st-course" title="Перейти к репозиторию" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    serhioromano/gxw2-st-course
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../.." class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Главная
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Главная
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../toc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Список тем
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    1. Введение
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            1. Введение
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-intro/fx-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Обзор ПЛК FX
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-intro/gxw2-install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Установка и настройка
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-intro/gxw2-interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Интерфейс GX Works 2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    1. База
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            1. База
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Переменные
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Компиляция
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Таймеры
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Таймеры
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Содержание">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Содержание
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#-61131-3" class="md-nav__link">
    <span class="md-ellipsis">
      Стандарт МЭК-61131-3
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Стандарт МЭК-61131-3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ton" class="md-nav__link">
    <span class="md-ellipsis">
      Функциональный блок TON
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tof" class="md-nav__link">
    <span class="md-ellipsis">
      Функциональный блок TOF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tp" class="md-nav__link">
    <span class="md-ellipsis">
      Функциональный блок TP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      Задание для практики
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#t" class="md-nav__link">
    <span class="md-ellipsis">
      Аппаратные таймеры (область T)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Аппаратные таймеры (область T)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#t_1" class="md-nav__link">
    <span class="md-ellipsis">
      Типы таймеров в области T
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#out_t" class="md-nav__link">
    <span class="md-ellipsis">
      Инструкция OUT_T
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      Задание для практики
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      Пример программы
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      Создание собственного тикера
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Создание собственного тикера">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      Использование прерываний
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Использование прерываний">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      Почему прерывания?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      Дополнительные возможности прерывания
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      Подсчет времени цикла
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      Задание для практики
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      Заключение
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/serhioromano/gxw2-st-course/edit/main/docs/2-basic/timer.md" title="Редактировать страницу" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/serhioromano/gxw2-st-course/raw/main/docs/2-basic/timer.md" title="Посмотреть исходный код страницы" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="_1">Таймеры в программировании <abbr title="Программируемый Логический Контроллер">ПЛК</abbr></h1>
<p>Таймеры — один из ключевых элементов программирования программируемых логических контроллеров (<abbr title="Программируемый Логический Контроллер">ПЛК</abbr>). Они используются практически во всех программах, будь то управление процессами, создание задержек или реализация циклических операций. В <abbr title="Программируемый Логический Контроллер">ПЛК</abbr> серии <abbr title="Модель серии FX ПЛК Mitsubishi">FX3G</abbr>/<abbr title="Модель серии FX ПЛК Mitsubishi">FX3U</abbr> таймеры особенно важны, так как они поддерживают как стандартные функциональные блоки (<abbr title="Функциональный Блок">ФБ</abbr>) по МЭК-61131-3, так и встроенные инструкции, специфичные для среды <abbr title="Среда разработки GX Works 2 для ПЛК Mitsubishi">GX Works 2</abbr>. В этой статье мы разберем:</p>
<ul>
<li>Стандарт МЭК-61131-3 и функциональные блоки <code>TON</code>, <code>TOF</code>, <code>TP</code>.</li>
<li>Инструкцию <code>OUT_T</code> для работы с аппаратными таймерами.</li>
<li>Создание собственного тикера для гибкого управления временем.</li>
</ul>
<h2 id="-61131-3">Стандарт МЭК-61131-3</h2>
<p>В соответствии со стандартом МЭК-61131-3, в среде <abbr title="Среда разработки GX Works 2 для ПЛК Mitsubishi">GX Works 2</abbr> доступны три типа стандартных функциональных блоков таймеров: <code>TON</code> (включение с задержкой), <code>TOF</code> (выключение с задержкой) и <code>TP</code> (импульсный таймер). Эти блоки удобны для создания таймеров в программах, но имеют определенные ограничения, о которых важно знать.</p>
<div class="admonition warning">
<p class="admonition-title"><strong>Ограничения использования функциональных блоков</strong></p>
<p>Количество функциональных блоков <code>TON</code>, <code>TOF</code> и <code>TP</code>, которые можно использовать в программе, ограничено количеством доступных таймеров в области памяти <code>T</code>. <abbr title="Среда разработки GX Works 2 для ПЛК Mitsubishi">GX Works 2</abbr> автоматически назначает таймеры из области <code>T</code> для каждого экземпляра функционального блока. Эти таймеры задаются в настройках: <em>Меню → Tools → Device/Label Automatic-Assign Settings...</em>.
<img alt="Назначение таймеров" src="../../img/timerassign.png" /></p>
<p>Если вы превысите лимит доступных таймеров, программа не скомпилируется. Поэтому важно заранее планировать количество используемых блоков.</p>
</div>
<h3 id="ton">Функциональный блок <code>TON</code></h3>
<p><code>TON</code> (Timer On-Delay) — таймер с задержкой включения. Он запускается, когда входной сигнал <code>IN</code> становится истинным, и активирует выход <code>Q</code> после заданного времени <code>PT</code>. Время, прошедшее с начала работы таймера, сохраняется в переменной <code>ET</code>.</p>
<p>Пример объявления экземпляра блока <code>TON</code>:</p>
<p><img alt="Объявление переменной TON" src="../../img/tondeclaration.png" /></p>
<p>Код для вызова блока в программе:</p>
<pre class="highlight"><code class="language-iecst">fbTON1(IN:=M0, PT:=T#10s, Q:=M1, ET:=tET);</code></pre>
<p><strong>Как это работает</strong>:
Если контакт <code>M0</code> замкнут (например, при подаче сигнала на вход), таймер начинает отсчет. Через 10 секунд (<code>T#10s</code>) выход <code>M1</code> активируется (становится <code>TRUE</code>). Переменная <code>tET</code> хранит время, прошедшее с момента запуска таймера. Это удобно для отслеживания текущего состояния.</p>
<p>Пример симуляции работы <code>TON</code>:</p>
<p><img alt="Симуляция TON" src="../../img/tonsimul.png" /></p>
<h3 id="tof">Функциональный блок <code>TOF</code></h3>
<p><code>TOF</code> (Timer Off-Delay) — таймер с задержкой выключения. Он активирует выход <code>Q</code> сразу, как только вход <code>IN</code> становится истинным, и удерживает его активным в течение времени <code>PT</code> после того, как вход <code>IN</code> становится ложным.</p>
<p>Пример вызова блока <code>TOF</code>:</p>
<pre class="highlight"><code class="language-iecst">fbTOF1(IN:=M2, PT:=T#5s, Q:=M3, ET:=tET2);</code></pre>
<p><strong>Как это работает</strong>:
Когда <code>M2</code> становится <code>TRUE</code>, выход <code>M3</code> немедленно активируется. Если <code>M2</code> становится <code>FALSE</code>, таймер начинает отсчет времени <code>PT</code> (в данном случае 5 секунд), и только после этого <code>M3</code> становится <code>FALSE</code>. Переменная <code>tET2</code> показывает, сколько времени осталось до завершения отсчета.</p>
<h3 id="tp">Функциональный блок <code>TP</code></h3>
<p><code>TP</code> (Timer Pulse) — импульсный таймер. Он генерирует выходной сигнал <code>Q</code> на фиксированное время <code>PT</code>, начиная с момента, когда вход <code>IN</code> становится истинным. Если вход <code>IN</code> остается активным дольше, чем <code>PT</code>, это не влияет на длительность импульса.</p>
<p>Пример вызова блока <code>TP</code>:</p>
<pre class="highlight"><code class="language-iecst">fbTP1(IN:=M4, PT:=T#3s, Q=&gt;M5, ET=&gt;tET3);</code></pre>
<p><strong>Как это работает</strong>:
При замыкании <code>M4</code> выход <code>M5</code> активируется на 3 секунды (<code>T#3s</code>), после чего автоматически становится <code>FALSE</code>, даже если <code>M4</code> остается активным. Переменная <code>tET3</code> показывает, сколько времени осталось до окончания импульса.</p>
<h3 id="_2">Задание для практики</h3>
<p>Создайте три функциональных блока: <code>BLINK1</code>, <code>BLINK2</code> и <code>BLINK3</code>. Каждый из них должен эмулировать поведение стандартного блока <code>BLINK</code> (периодическое включение/выключение выхода), но использовать разные таймеры: <code>TON</code>, <code>TOF</code> и <code>TP</code> соответственно.</p>
<p><strong>Входные переменные</strong>:
- <code>IN</code> — запуск работы блока (<code>BOOL</code>).
- <code>TIMELOW</code> — время, когда выход выключен (<code>TIME</code>).
- <code>TIMEHI</code> — время, когда выход включен (<code>TIME</code>).</p>
<p><strong>Выходные переменные</strong>:
- <code>Q</code> — сигнал во время активной фазы (<code>BOOL</code>).
- <code>CNT</code> — счетчик количества "морганий" (<code>INT</code>).</p>
<p><strong>Пример поведения</strong>:
Если <code>IN = TRUE</code>, выход <code>Q</code> должен чередовать состояния: включено (<code>TIMEHI</code>) и выключено (<code>TIMELOW</code>), подсчитывая количество циклов в <code>CNT</code>.</p>
<h2 id="t">Аппаратные таймеры (область <code>T</code>)</h2>
<p>Помимо функциональных блоков, в <abbr title="Среда разработки GX Works 2 для ПЛК Mitsubishi">GX Works 2</abbr> доступны аппаратные таймеры, которые хранятся в области памяти <code>T</code>. Эти таймеры имеют фиксированные диапазоны и шаг времени, что делает их удобными для определенных задач. Работа с ними осуществляется через инструкцию <code>OUT_T</code>, что позволяет напрямую управлять таймерами без использования функциональных блоков.</p>
<h3 id="t_1">Типы таймеров в области <code>T</code></h3>
<table>
<thead>
<tr>
<th>Назначение</th>
<th>Диапазон</th>
<th>Количество</th>
</tr>
</thead>
<tbody>
<tr>
<td>Таймеры с шагом 100 мс</td>
<td><code>T0</code>–<code>T199</code></td>
<td>200</td>
</tr>
<tr>
<td>Таймеры с шагом <strong>10мс</strong></td>
<td><code>T200</code>–<code>T245</code></td>
<td>46</td>
</tr>
<tr>
<td>Таймеры 1 мс (EEPROM)</td>
<td><code>T246</code>–<code>T249</code></td>
<td>4</td>
</tr>
<tr>
<td>Таймеры 100 мс (EEPROM)</td>
<td><code>T250</code>–<code>T255</code></td>
<td>6</td>
</tr>
<tr>
<td>Таймеры с шагом 1 мс</td>
<td><code>T256</code>–<code>T319</code></td>
<td>64</td>
</tr>
</tbody>
</table>
<p>Каждый таймер в области <code>T</code> представлен тремя элементами:
- <code>TCn</code> — катушка таймера (Timer Coil), используется для запуска таймера.
- <code>TSn</code> — контакт таймера (Timer State), замыкается по завершении отсчета.
- <code>TNn</code> — регистр времени (Timer Number), хранит текущее значение времени в шагах или заданное время работы.</p>
<p>Прямое обращение к ячейке, например <code>T0</code>, в Structured Text не используется. Вместо этого вы работаете с <code>TC0</code>, <code>TS0</code> и <code>TN0</code>.</p>
<h3 id="out_t">Инструкция <code>OUT_T</code></h3>
<p>Инструкция <code>OUT_T</code> управляет аппаратными таймерами и имеет следующий синтаксис:</p>
<pre class="highlight"><code class="language-iecst">OUT_T(Условие, Катушка_таймера, Время_в_шагах);</code></pre>
<p><strong>Параметры</strong>:</p>
<ol>
<li><strong>Условие</strong> — логическое выражение или контакт, определяющее начало работы таймера (например, <code>X0</code>).</li>
<li><strong>Катушка_таймера</strong> — идентификатор таймера, например <code>TC0</code>.</li>
<li><strong>Время_в_шагах</strong> — количество шагов времени, зависящее от типа таймера (например, для <code>T0</code> шаг составляет 100 мс, значит значение 10 равно 1000 мс или 1 с).</li>
</ol>
<p><strong>Пример программы</strong>:</p>
<pre class="highlight"><code class="language-iecst">OUT_T(X0, TC0, 10);
M0 := TN0 &lt;= 5;
Y0 := TS0;
RST(M1, TC0);</code></pre>
<p><strong>Разбор примера</strong>:</p>
<ul>
<li>Когда вход <code>X0</code> становится <code>TRUE</code>, таймер <code>T0</code> запускается и работает 1 секунду (10 шагов × 100 мс).</li>
<li>Первые 500 мс (5 шагов) контакт <code>M0</code> будет активным (<code>TN0 &lt;= 5</code>).</li>
<li>По истечении 1 секунды контакт <code>TS0</code> замкнется, активируя выход <code>Y0</code>.</li>
<li>Для сброса таймера используется инструкция <code>RST</code> с катушкой <code>TC0</code>, если <code>M1 = TRUE</code>. Это обнуляет <code>TN0</code> и <code>TS0</code>.</li>
</ul>
<p><strong>Сброс таймера</strong>:</p>
<p>Таймер можно сбросить двумя способами:</p>
<ol>
<li>Разомкнуть входное условие (например, установить <code>X0 := FALSE</code>). При следующем замыкании <code>X0</code> таймер начнет отсчет заново.</li>
<li>
<p>Использовать инструкцию <code>RST</code>, например <code>RST(M1, TC0)</code>.</p>
<p>Для принудительного сброса. Обратите внимание, что прямое присваивание <code>TC0 := 0</code> вызовет ошибку компиляции, так как <code>TC0</code> доступна только для чтения.</p>
</li>
</ol>
<h3 id="_3">Задание для практики</h3>
<p>Создайте собственные функциональные блоки <code>CTON</code> (Custom TON), <code>CTOF</code> (Custom TOF) и <code>CTP</code> (Custom TP) с использованием инструкции <code>OUT_T</code>. Каждый блок должен эмулировать поведение стандартных блоков <code>TON</code>, <code>TOF</code> и <code>TP</code>.</p>
<p><strong>Входные переменные</strong>:</p>
<ul>
<li><code>IN</code> — запуск таймера (<code>BOOL</code>).</li>
<li><code>PT</code> — время работы в формате <code>TIME</code>.</li>
</ul>
<p><strong>Выходные переменные</strong>:</p>
<ul>
<li><code>Q</code> — сигнал окончания работы (<code>BOOL</code>).</li>
<li><code>ET</code> — оставшееся время в формате <code>TIME</code>.</li>
</ul>
<p>Также создайте функциональный блок <code>CBLINK</code> (Custom BLINK) для реализации периодического включения/выключения выхода.</p>
<p><strong>Входные переменные</strong>:</p>
<ul>
<li><code>IN</code> — запуск блока (<code>BOOL</code>).</li>
<li><code>TIMELOW</code> — время выключенного состояния (<code>TIME</code>).</li>
<li><code>TIMEHI</code> — время включенного состояния (<code>TIME</code>).</li>
</ul>
<p><strong>Выходные переменные</strong>:</p>
<ul>
<li><code>Q</code> — сигнал во время активной фазы (<code>BOOL</code>).</li>
</ul>
<div class="admonition warning">
<p class="admonition-title"><strong>Важно</strong></p>
<p>Эти блоки используют аппаратные таймеры, поэтому в программе может быть только один экземпляр каждого блока, чтобы избежать конфликта данных. Поэтому эти блоки не применимы в реальных программах, но они отлично подходят для изучения работы инструкции <code>OUT_T</code>.</p>
</div>
<h3 id="_4">Пример программы</h3>
<p>Вот пример реализации функционального блока <code>CTON</code> с использованием инструкции <code>OUT_T</code>:</p>
<pre class="highlight"><code class="language-iecst">FUNCTION_BLOCK CTON
    VAR_INPUT
        IN: BOOL;
        PT: TIME;
    END_VAR
    VAR_OUTPUT
        Q: BOOL;
        ET: TIME;
    END_VAR
    VAR
        TimerValue: INT;
    END_VAR

    (* Преобразуем время в шаги (для таймера с шагом 100 мс) *)
    TimerValue := TIME_TO_INT(PT) / 100;
    OUT_T(IN, TC0, TimerValue);
    Q := TS0;
    (* Оставшееся время в мс *)
    ET := INT_TO_TIME((TimerValue - TN0) * 100);
END_FUNCTION_BLOCK</code></pre>
<p><strong>Объяснение</strong>:</p>
<ul>
<li>Входное время <code>PT</code> преобразуется в шаги (например, <code>T#1000ms</code> → 10 шагов для таймера <code>T0</code>).</li>
<li>Инструкция <code>OUT_T</code> запускает таймер <code>T0</code> при <code>IN = TRUE</code>.</li>
<li>Выход <code>Q</code> становится <code>TRUE</code>, когда таймер завершает работу (<code>TS0 = TRUE</code>).</li>
<li>Переменная <code>ET</code> вычисляет оставшееся время на основе текущего значения <code>TN0</code>.</li>
</ul>
<p>Аналогичным образом можно реализовать <code>CTOF</code> и <code>CTP</code>, адаптировав логику под их поведение.</p>
<h2 id="_5">Создание собственного тикера</h2>
<p>В некоторых средах программирования <abbr title="Программируемый Логический Контроллер">ПЛК</abbr>, например CoDeSys, есть функция <code>TIME()</code>, которая возвращает время в миллисекундах с момента включения или сброса <abbr title="Программируемый Логический Контроллер">ПЛК</abbr> в формате <code>DWORD</code> (32-битное беззнаковое число). Максимальное значение <code>DWORD</code> составляет 4 294 967 295 мс, что эквивалентно примерно 49 дням. После этого счетчик переполняется и сбрасывается. Все таймеры <code>TON</code>, <code>TOF</code> и <code>TP</code> написаны с использованием этой функции. Это можно увидеть открыв стандартную библиотеку на редактирование. Я привык к этой функции и использовал ее достаточно часто. Она удобна и универсальна.</p>
<p>В <abbr title="Среда разработки GX Works 2 для ПЛК Mitsubishi">GX Works 2</abbr> нет прямого аналога функции <code>TIME()</code>, но мы можем создать собственный тикер, используя прерывания по времени. Это позволит гибко отслеживать время и создавать неограниченное количество таймеров без привязки к области <code>T</code>.</p>
<h3 id="_6">Использование прерываний</h3>
<p>В <abbr title="Программируемый Логический Контроллер">ПЛК</abbr> <abbr title="Модель серии FX ПЛК Mitsubishi">FX3G</abbr>/<abbr title="Модель серии FX ПЛК Mitsubishi">FX3U</abbr> доступны прерывания по времени, которые можно настроить на срабатывание с заданной периодичностью, например каждые <strong>10мс</strong> или 50 мс. Для этого используются указатели прерываний, такие как:</p>
<ul>
<li><code>I610</code> — срабатывает каждые <strong>10мс</strong> (событие 6).</li>
<li><code>I750</code> — срабатывает каждые 50 мс (событие 7).</li>
</ul>
<p><strong>Шаги для создания тикера</strong>:</p>
<ol>
<li>
<p><strong>Создание программы</strong>:
    В дереве проекта добавьте новую программу. <abbr title="Правая Кнопка Мыши">ПКМ</abbr> в дереве проекта на <abbr title="Элемент программы (Program Organization Unit)">POU</abbr> и добавить новые данные. Имя - <code>TIKER</code>, тип — <em>Program Block</em>, язык — Structured Text.</p>
</li>
<li>
<p><strong>Объявление переменной</strong>:
    В глобальных переменных создайте переменную <code>TKR10</code> типа <code>Double Word [Unsigned/Bit String]</code>. Она будет хранить время с разрешением <strong>10мс</strong> (например, значение 10 соответствует 100 мс).</p>
<p>Почему хранить в интервалах <strong>10мс</strong> а не в миллисекундах? Мы все равно сохраняем значение раз в <strong>10мс</strong>, и если хранить в миллисекундах то увеличение будет идти с шагом <strong>10мс</strong>. Но если мы хранить 1мс, то переменная <code>TKR10</code> переполнится быстрей. Использование шага <strong>10мс</strong> позволяет хранить в <code>TKR10</code> время до почти года без переполнения.</p>
</li>
<li>
<p><strong>Настройка прерывания</strong>:</p>
<ul>
<li>
<p>В главной программе добавьте в начало инструкцию <code>EI(TRUE);</code> <em>Enable Interrupt</em> для разрешения прерываний текущей программы. Естественно если у вас п проекте есть и другие программы, туда это тоже нужно вставить.</p>
<p>Иногда бывает нужно какой-то участок кода отделить от прерываний, и сделать так чтобы он не прерывался. Можно использовать <code>DI(TRUE);</code> <em>Disable Interrupt</em> перед этим участком кода и потом опять <code>EI(TRUE);</code>.</p>
</li>
<li>
<p>Добавим нашу программу в задачи. В <em>Program Settings → Execution Program</em> <abbr title="Правая Кнопка Мыши">ПКМ</abbr> на MAIN - Добавить новые данные. Имя - <code>TIKER</code>, тип — <em>Task</em>. В дереве проекта увидим новый элемент и у нас откроется страница добавления программы. Жмем на 3 точки, и выбираем нашу программу <code>TIKER</code>. Это еще не все. Теперь на имени задачи <abbr title="Правая Кнопка Мыши">ПКМ</abbr> и выбираем свойства <em>Property</em>. В открывшемся окне, в поле <em>Event</em> где написано <code>TRUE</code> что значит запускать программу непрерывно, мы пишем <code>I610</code>.</p>
</li>
</ul>
<p>Еще раз что мы только что сделали. Мы добавили нашу программу в задачи исполнения и указали что она должна исполнятся раз в <strong>10мс</strong>. А в основной программе мы разрешили прерывания в любой точке программы.</p>
</li>
<li>
<p><strong>Код программы тикера</strong>:</p>
</li>
</ol>
<pre class="highlight"><code class="language-iecst">DINC(TRUE, TKR10);</code></pre>
<p><strong>Объяснение</strong>:</p>
<p>Инструкция <code>DINC</code> увеличивает значение <code>TKR10</code> на 1 каждые <strong>10мс</strong>. Поскольку переменные типа <code>Double Word [Unsigned/Bit String]</code> не поддерживают прямые математические операции (например, <code>TKR10 := TKR10 + 1</code>), используется инструкция <code>DINC</code>.</p>
<p><strong>Проверка</strong>:</p>
<p>Для проверки загрузите программу в реальный <abbr title="Программируемый Логический Контроллер">ПЛК</abbr>, так как симуляция в <abbr title="Среда разработки GX Works 2 для ПЛК Mitsubishi">GX Works 2</abbr> не поддерживает прерывания. Переменная <code>TKR10</code> будет увеличиваться с высокой точностью каждые <strong>10мс</strong>.</p>
<h4 id="_7">Почему прерывания?</h4>
<p>Если настроить программу на выполнение с интервалом (например, <code>T#10ms</code>) вместо прерывания, точность тикера может пострадать. Программа будет выполняться не каждые <strong>10мс</strong> а не чаще, чем раз в <strong>10мс</strong>, Выполнение программы может задерживаться, если другие программы еще не завершили выполнение даже если <strong>10мс</strong> уже истекли, мы не исполним программу пока другие не закончат свою работу, а сколько на это уйдет времени не известно, возможно даже больше чем <strong>10мс</strong>, так что мы можем пропустить целый цикл. Прерывание же гарантирует выполнение программы <code>TIKER</code> точно через <strong>10мс</strong>, прерывая любую текущую программу.</p>
<p>В нашем случае, мы исполним программу <code>TIKER</code> как только исткет <strong>10мс</strong>, не важно что основная программа сейчас в работе. Мы прервем работу основной программы, по этому это и называется прерывание, исполним программу <code>TIKER</code>, а потом продолжим исполнение основной программы.</p>
<h4 id="_8">Дополнительные возможности прерывания</h4>
<p>Инструкция <code>REF</code> (<em>Refresh</em>) позволяет обновлять входы или выходы <abbr title="Программируемый Логический Контроллер">ПЛК</abbr> в середине цикла программы, не дожидаясь его завершения. Это полезно для работы с актуальными данными и часто используется именно в программах прерывания.</p>
<p><strong>Пример</strong>:</p>
<p>Допустим у вас <abbr title="Программируемый Логический Контроллер">ПЛК</abbr> 12 входов и 12 выходов и мы хотим обновить их все значения.</p>
<pre class="highlight"><code class="language-iecst">(* Чтение 12 входов, начиная с X0 *)
REF(TRUE, X0, 12);
(* Обновление 12 выходов, начиная с Y0 *)
REF(TRUE, Y0, 12);</code></pre>
<p><strong>Пояснение</strong>:</p>
<p>Зачем вообще это нужно? Вы знаете что программа <abbr title="Программируемый Логический Контроллер">ПЛК</abbr> исполняется циклически. Исполняется, после завершения исполняется снова, и так бесконечно. Каждое исполнение программы назовем цикл. Как мы знаем что чтение значений на входах <abbr title="Программируемый Логический Контроллер">ПЛК</abbr> происходит перед началом каждого цикла программы, а обновление выходов по завершении каждого цикла.</p>
<p>Что бы было более понятно давайте рассмотрим пример.</p>
<pre class="highlight"><code class="language-iecst">Y0 := FALSE;

(* Кусок программы на 20 мс *)

IF iStep &gt; 0 THEN
    Y0 := TRUE;
END_IF;</code></pre>
<p>Посмотрите в нашем примере катушка <code>Y0</code> принимает значения как <code>TRUE</code> так и <code>FALSE</code> и все в одной программе. Между этими назначениями проходит примерно 20мс. Вопрос. На выходе будет ли отключение на 20мс? Ответ нет. Потому что значение выхода присвоится только после завершения цикла.</p>
<pre class="highlight"><code class="language-iecst">Y0 := FALSE;
REF(TRUE, Y0, 1);
(* Кусок программы на 20 мс *)

IF iStep &gt; 0 THEN
    Y0 := TRUE;
    REF(TRUE, Y0, 1);
END_IF;</code></pre>
<p>А если код будет такой, то на выходе пока исполняется одна программа, будет переключение выхода на 20мс.</p>
<p>Инструкция <code>REF</code> позволяет досрочно прочитать входа или назначит значения выходам.</p>
<p><strong>Применение</strong>:</p>
<p>Если вход <code>X0</code> изменился в середине цикла, вызов <code>REF(TRUE, X0, 1)</code> обновит его значение. Аналогично, установка <code>Y10 := TRUE</code> с последующим <code>REF(TRUE, Y10, 1)</code> немедленно активирует выход <code>Y10</code>.</p>
<h3 id="_9">Подсчет времени цикла</h3>
<p>У Mitsubishi есть системный регистр <code>D8010</code>, который хранит время исполнения программы с разрешением 0,1мс. Мы можем написать блок, который будет так же считать тикер.</p>
<div class="admonition warning">
<p class="admonition-title"><strong>Ограничения</strong></p>
<p>Такой блок будет работать только если у нас программа хотя бы 5000 шагов. В противном случае, время одного цикла будет меньше 1мс, и точность будет очень сильно страдать.</p>
</div>
<div class="admonition warning">
<p class="admonition-title"><strong>Точность</strong></p>
<p>Так как разрешение 0,1мс, если мы предположим что один цикл программы займет 10мс и на каждый цикл у нас будет погрешность в 0,1мс в одну и туже сторону, то отклонение может составить 36 секунд на каждый час работы. Хотя это маловероятный сценарий развития событий.</p>
</div>
<ol>
<li>
<p><strong>Объявление переменной</strong>:</p>
<p>В глобальных переменных создайте переменную <code>TKR10</code> типа <code>Double Word [Unsigned/Bit String]</code>. Она будет хранить время с разрешением <strong>10мс</strong> (например, значение 10 соответствует 100 мс).</p>
<p>В глобальных переменных создайте переменную <code>TKR1</code> типа <code>Double Word [Unsigned/Bit String]</code>. Она будет хранить время с разрешением <strong>1мс</strong>.</p>
</li>
<li>
<p><strong>Напишем Функциональный Блок</strong>:</p>
<pre class="highlight"><code class="language-iecst">FUNCTION_BLOCK CycleTimeCounter
    VAR_INPUT
        (* Включение/выключение подсчета времени *)
        Enable: BOOL;
        (* Сброс *)
        Reset: BOOL;
    END_VAR
    VAR_OUTPUT
        (* Общее время работы в миллисекундах *)
        TotalTime1Ms: DINT;
        (* Общее время работы в интервалах 10 мс *)
        TotalTime10Ms: DINT;
    END_VAR
    VAR
        (* Значение D8010 в единицах 0,1 мс *)
        LastCycleTime: INT;
        (* Накопленное время в 0,1 мс *)
        AccumulatedTime: DINT;
    END_VAR

    RST(Reset, AccumulatedTime);
    RST(Reset, TotalTime1Ms);
    RST(Reset, TotalTime10Ms);

    (* Проверяем, включен ли подсчет *)
    IF NOT Enable THEN
        RETURN;
    END_IF;

    (* Читаем значение системного регистра D8010 (время цикла в 0,1 мс) *)
    LastCycleTime := D8010;

    (* Добавляем время последнего цикла к накопленному времени в 0,1 мс *)
    DADD(TRUE, AccumulatedTime, LastCycleTime, AccumulatedTime);

    (* Преобразуем накопленное время в миллисекунды 1 единица D8010 = 0,1 мс *)
    TotalTime1Ms := AccumulatedTime / 10;

    (* Преобразуем накопленное время в интервалы 10 мс (1 интервал = 100 единиц D8010) *)
    TotalTime10Ms := AccumulatedTime / 100;
END_FUNCTION_BLOCK</code></pre>
</li>
<li>
<p><strong>Программа</strong>:</p>
<pre class="highlight"><code class="language-iecst">CycleTimeCounter1(
    Enable := M8000,
    Reset := M8002,
    TotalTime1Ms := TKR1,
    TotalTime10Ms := TKR10
);</code></pre>
<p>Пишем такой блок в начале нашей программы, и теперь у нес в переменных глобальных <code>TKR10</code> и <code>TKR1</code> будет время от начала работы <abbr title="Программируемый Логический Контроллер">ПЛК</abbr>. <code>TKR1</code> сможет максимум 29 дней значение потом сброс, а вот <code>TKR10</code> может хранить до года.</p>
</li>
</ol>
<h3 id="_10">Задание для практики</h3>
<p>Создайте собственные функциональные блоки <code>TTON</code> (Ticker TON), <code>TTOF</code> (Ticker TOF) и <code>TTP</code> (Ticker TP) с использованием тикера <code>TKR10</code>. Каждый блок должен эмулировать поведение стандартных блоков <code>TON</code>, <code>TOF</code> и <code>TP</code>. Такой таймер будет работать не важно как вы сделали тикер, через прерывание или через подсчет цикла.</p>
<p><strong>Входные переменные</strong>:</p>
<ul>
<li><code>IN</code> — запуск таймера (<code>BOOL</code>).</li>
<li><code>PT</code> — время работы в формате <code>TIME</code>.</li>
</ul>
<p><strong>Выходные переменные</strong>:</p>
<ul>
<li><code>Q</code> — сигнал окончания работы (<code>BOOL</code>).</li>
<li><code>ET</code> — оставшееся время в формате <code>TIME</code>.</li>
</ul>
<p>Также создайте функциональный блок <code>CBLINK</code> (Custom BLINK) для реализации периодического включения/выключения выхода.</p>
<p><strong>Входные переменные</strong>:</p>
<ul>
<li><code>IN</code> — запуск блока (<code>BOOL</code>).</li>
<li><code>TIMELOW</code> — время выключенного состояния (<code>TIME</code>).</li>
<li><code>TIMEHI</code> — время включенного состояния (<code>TIME</code>).</li>
</ul>
<p><strong>Выходные переменные</strong>:</p>
<ul>
<li><code>Q</code> — сигнал во время активной фазы (<code>BOOL</code>).</li>
</ul>
<h2 id="_11">Заключение</h2>
<p>Таймеры — мощный инструмент в программировании <abbr title="Программируемый Логический Контроллер">ПЛК</abbr>, позволяющий реализовать сложную логику управления временем. В <abbr title="Среда разработки GX Works 2 для ПЛК Mitsubishi">GX Works 2</abbr> вы можете использовать стандартные функциональные блоки <code>TON</code>, <code>TOF</code>, <code>TP</code> для простоты, аппаратные таймеры с инструкцией <code>OUT_T</code> для большей гибкости или создать собственный тикер на основе прерываний для неограниченного количества таймеров. Понимание этих подходов и их ограничений поможет вам писать эффективные и надежные программы для <abbr title="Программируемый Логический Контроллер">ПЛК</abbr>.</p>
<!-- markdownlint-disable MD041 -->







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Последнее обновление">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="27 августа 2025 г. 09:24:52 UTC">27 августа 2025 г.</span>
  </span>

    
    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="Участники">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg>
      
    </span>
    <nav>
      
        <a href="mailto:serhioromano@outlook.com">Serhioromano</a>
    </nav>
  </span>

    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  К началу
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Нижний колонтитул" >
        
          
          <a href="../compile/" class="md-footer__link md-footer__link--prev" aria-label="Назад: Компиляция">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Назад
              </span>
              <div class="md-ellipsis">
                Компиляция
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Все права защищены &copy; 2025 Сергей Романов

    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Принять</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Управлять настройками</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.expand", "navigation.sections", "navigation.tracking", "navigation.path", "navigation.indexes", "navigation.footer", "toc.follow", "toc.integrate", "search.suggest", "search.highlight", "search.share", "content.tooltips", "announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440", "clipboard.copy": "\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440", "search.result.more.one": "\u0415\u0449\u0451 1 \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.more.other": "\u0415\u0449\u0451 # \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.none": "\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e", "search.result.one": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e 1 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435", "search.result.other": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439: #", "search.result.placeholder": "\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430", "search.result.term.missing": "\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442", "select.version": "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0440\u0441\u0438\u044e"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="../../javascripts/hjs.js"></script>
      
        <script src="../../javascripts/hl.js"></script>
      
    
  </body>
</html>